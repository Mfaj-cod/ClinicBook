{% extends 'base.html' %}
{% block content %}
<div class="container my-4">
  <div class="text-center mb-4">
    <span class="d-inline-block rounded-circle bg-primary bg-opacity-10 p-3">
      <i class="bi bi-person-circle" style="font-size:2.2rem; color:#0d6efd;"></i>
    </span>
    <h2 class="fw-bold mt-2" style="color:#0d3a6f;">Your Profile</h2>
    <div class="text-muted mb-2" style="font-size:1.1rem;">
      View your account details and information
    </div>
  </div>

  <div class="mx-auto" style="max-width: 600px;">
    {% if doctor %}
      <!-- Doctor Info -->
      <div class="card shadow-sm border-0 mb-4">
        <div class="card-body">
          <h4 class="card-title mb-2 fw-semibold" style="color:#0d3a6f;">{{ doctor.name }}</h4>
          <div class="mb-1 small text-muted">
            <i class="bi bi-person-badge"></i>
            <strong>Specialization:</strong> {{ doctor.specialization }}
          </div>
          <div class="mb-1 small text-muted">
            <i class="bi bi-currency-rupee"></i>
            <strong>Fee:</strong> {{ doctor.fee }}
          </div>
        </div>
      </div>

    {% elif patient %}
      <!-- Patient Info -->
      <div class="card shadow-sm border-0 mb-4">
        <div class="card-body">
          <h4 class="card-title mb-2 fw-semibold" style="color:#0d3a6f;">{{ patient.name }}</h4>
          <div class="mb-1 small text-muted">
            <i class="bi bi-envelope"></i>
            <strong>Email:</strong> {{ patient.email }}
          </div>
          {% if patient.phone %}
          <div class="mb-1 small text-muted">
            <i class="bi bi-telephone"></i>
            <strong>Phone:</strong> {{ patient.phone }}
          </div>
          {% endif %}
          {% if patient.gender %}
          <div class="mb-1 small text-muted">
            <i class="bi bi-gender-ambiguous"></i>
            <strong>Gender:</strong> {{ patient.gender }}
          </div>
          {% endif %}
          {% if patient.age %}
          <div class="mb-1 small text-muted">
            <i class="bi bi-calendar"></i>
            <strong>Age:</strong> {{ patient.age }} years
          </div>
          {% endif %}
        </div>
      </div>

      <!-- Reviews by Patient -->
      <div class="card shadow-sm border-0 mb-4">
        <div class="card-header bg-light fw-semibold">
          <i class="bi bi-chat-left-text"></i> My Reviews
        </div>
        <div class="card-body">
          {% if my_reviews %}
            {% for r in my_reviews %}
            <div class="mb-3 pb-2 border-bottom">
              <div class="mb-1">
                {% if r.doctor_name %}
                  <strong>Doctor: {{ r.doctor_name }}</strong>
                {% elif r.clinic_name %}
                  <strong>Clinic: {{ r.clinic_name }}</strong>
                {% endif %}
                <span class="ms-2 small text-muted">{{ r.created_at }}</span>
              </div>
              <div class="small mb-1">
                <i class="bi bi-star-fill" style="color:#ffc107;"></i> {{ r.rating }} / 5
              </div>
              {% if r.comment %}
              <p class="small mb-0">{{ r.comment }}</p>
              {% endif %}
            </div>
            {% endfor %}
          {% else %}
            <div class="text-muted">You havenâ€™t written any reviews yet.</div>
          {% endif %}
        </div>
      </div>
    {% endif %}
  </div>
</div>
{% endblock %}
