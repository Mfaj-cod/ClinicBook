2025-11-27 21:46:58,180 - src.logg - INFO - 
App and DB connected.
2025-11-27 21:46:58,197 - src.logg - INFO - DB schema ready at ./data\clinicBook.db
2025-11-27 21:46:58,200 - src.logg - INFO - schema ensured in seeding.
2025-11-27 21:46:58,208 - src.logg - INFO - Seeding complete. DB at ./data\clinicBook.db
2025-11-27 21:47:40,248 - src.logg - ERROR - Chat failure: 'str' object has no attribute 'has_tool_calls'
Traceback (most recent call last):
  File "C:\Users\fajal\OneDrive\Desktop\ClinicBook\gem.py", line 119, in gemini_chat
    if response.has_tool_calls:
       ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'has_tool_calls'
2025-11-27 21:49:01,423 - src.logg - ERROR - Chat failure: 'str' object has no attribute 'has_tool_calls'
Traceback (most recent call last):
  File "C:\Users\fajal\OneDrive\Desktop\ClinicBook\gem.py", line 119, in gemini_chat
    if response.has_tool_calls:
       ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'has_tool_calls'
2025-11-27 21:50:17,180 - src.logg - INFO - App running..................
2025-11-27 21:50:19,357 - src.logg - INFO - App running..................
2025-11-27 21:56:30,730 - src.logg - INFO - [Gemini] Model loaded with tools.
2025-11-27 21:56:30,735 - src.logg - INFO - 
App and DB connected.
2025-11-27 21:56:30,783 - src.logg - INFO - DB schema ready at ./data\clinicBook.db
2025-11-27 21:56:30,787 - src.logg - INFO - schema ensured in seeding.
2025-11-27 21:56:30,801 - src.logg - INFO - Seeding complete. DB at ./data\clinicBook.db
2025-11-27 21:56:34,185 - src.logg - INFO - [Gemini] Model loaded with tools.
2025-11-27 21:56:34,187 - src.logg - INFO - 
App and DB connected.
2025-11-27 21:56:34,203 - src.logg - INFO - DB schema ready at ./data\clinicBook.db
2025-11-27 21:56:34,205 - src.logg - INFO - schema ensured in seeding.
2025-11-27 21:56:34,213 - src.logg - INFO - Seeding complete. DB at ./data\clinicBook.db
2025-11-27 21:57:03,165 - src.logg - ERROR - Chat failure: 'str' object has no attribute 'has_tool_calls'
Traceback (most recent call last):
  File "C:\Users\fajal\OneDrive\Desktop\ClinicBook\gem.py", line 119, in gemini_chat
    if response.has_tool_calls:
       ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'has_tool_calls'
2025-11-27 21:58:16,523 - src.logg - INFO - [Gemini] Model loaded with tools.
2025-11-27 21:58:16,526 - src.logg - INFO - 
App and DB connected.
2025-11-27 21:58:16,549 - src.logg - INFO - DB schema ready at ./data\clinicBook.db
2025-11-27 21:58:16,552 - src.logg - INFO - schema ensured in seeding.
2025-11-27 21:58:16,563 - src.logg - INFO - Seeding complete. DB at ./data\clinicBook.db
2025-11-27 21:58:23,789 - src.logg - INFO - [Gemini] Model loaded with tools.
2025-11-27 21:58:23,798 - src.logg - INFO - 
App and DB connected.
2025-11-27 21:58:23,845 - src.logg - INFO - DB schema ready at ./data\clinicBook.db
2025-11-27 21:58:23,852 - src.logg - INFO - schema ensured in seeding.
2025-11-27 21:58:23,867 - src.logg - INFO - Seeding complete. DB at ./data\clinicBook.db
2025-11-27 21:58:47,251 - src.logg - ERROR - Chat failure: 'GenerateContentResponse' object has no attribute 'has_tool_calls'
Traceback (most recent call last):
  File "C:\Users\fajal\OneDrive\Desktop\ClinicBook\gem.py", line 119, in gemini_chat
    if response.has_tool_calls:
       ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'GenerateContentResponse' object has no attribute 'has_tool_calls'
2025-11-27 21:59:00,024 - src.logg - INFO - App running..................
2025-11-27 21:59:02,243 - src.logg - INFO - App running..................
2025-11-27 21:59:09,694 - src.logg - INFO - [Gemini] Model loaded with tools.
2025-11-27 21:59:09,696 - src.logg - INFO - 
App and DB connected.
2025-11-27 21:59:09,715 - src.logg - INFO - DB schema ready at ./data\clinicBook.db
2025-11-27 21:59:09,718 - src.logg - INFO - schema ensured in seeding.
2025-11-27 21:59:09,901 - src.logg - INFO - Seeding complete. DB at ./data\clinicBook.db
2025-11-27 21:59:14,507 - src.logg - INFO - [Gemini] Model loaded with tools.
2025-11-27 21:59:14,511 - src.logg - INFO - 
App and DB connected.
2025-11-27 21:59:14,567 - src.logg - INFO - DB schema ready at ./data\clinicBook.db
2025-11-27 21:59:14,575 - src.logg - INFO - schema ensured in seeding.
2025-11-27 21:59:14,587 - src.logg - INFO - Seeding complete. DB at ./data\clinicBook.db
2025-11-27 21:59:52,258 - src.logg - ERROR - Chat failure: 'GenerateContentResponse' object has no attribute 'has_tool_calls'
Traceback (most recent call last):
  File "C:\Users\fajal\OneDrive\Desktop\ClinicBook\gem.py", line 119, in gemini_chat
    if response.has_tool_calls:
       ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'GenerateContentResponse' object has no attribute 'has_tool_calls'
2025-11-27 22:36:27,185 - src.logg - INFO - [Gemini] Model loaded with tools.
2025-11-27 22:36:27,187 - src.logg - INFO - 
App and DB connected.
2025-11-27 22:36:27,200 - src.logg - INFO - DB schema ready at ./data\clinicBook.db
2025-11-27 22:36:27,201 - src.logg - INFO - schema ensured in seeding.
2025-11-27 22:36:27,381 - src.logg - INFO - Seeding complete. DB at ./data\clinicBook.db
2025-11-27 22:36:29,534 - src.logg - INFO - [Gemini] Model loaded with tools.
2025-11-27 22:36:29,536 - src.logg - INFO - 
App and DB connected.
2025-11-27 22:36:29,554 - src.logg - INFO - DB schema ready at ./data\clinicBook.db
2025-11-27 22:36:29,556 - src.logg - INFO - schema ensured in seeding.
2025-11-27 22:36:29,735 - src.logg - INFO - Seeding complete. DB at ./data\clinicBook.db
2025-11-27 22:36:56,515 - src.logg - INFO - DEBUG: Type of response is: <class 'google.generativeai.types.generation_types.GenerateContentResponse'>
2025-11-27 22:36:56,516 - src.logg - ERROR - Chat failure: 'GenerateContentResponse' object has no attribute 'has_tool_calls'
Traceback (most recent call last):
  File "C:\Users\fajal\OneDrive\Desktop\ClinicBook\gem.py", line 158, in gemini_chat
    if response.has_tool_calls:
       ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'GenerateContentResponse' object has no attribute 'has_tool_calls'
2025-11-27 22:38:19,111 - src.logg - INFO - App running..................
2025-11-27 22:38:21,307 - src.logg - INFO - App running..................
2025-11-27 22:40:20,842 - src.logg - INFO - [Gemini] Model loaded with tools.
2025-11-27 22:56:55,461 - src.logg - INFO - App running..................
2025-11-27 23:17:27,125 - src.logg - INFO - [Gemini] Model loaded with tools.
2025-11-27 23:17:27,128 - src.logg - INFO - 
App and DB connected.
2025-11-27 23:17:27,141 - src.logg - INFO - DB schema ready at ./data\clinicBook.db
2025-11-27 23:17:27,143 - src.logg - INFO - schema ensured in seeding.
2025-11-27 23:17:27,322 - src.logg - INFO - Seeding complete. DB at ./data\clinicBook.db
2025-11-27 23:17:31,058 - src.logg - INFO - [Gemini] Model loaded with tools.
2025-11-27 23:17:31,064 - src.logg - INFO - 
App and DB connected.
2025-11-27 23:17:31,108 - src.logg - INFO - DB schema ready at ./data\clinicBook.db
2025-11-27 23:17:31,115 - src.logg - INFO - schema ensured in seeding.
2025-11-27 23:17:31,304 - src.logg - INFO - Seeding complete. DB at ./data\clinicBook.db
2025-11-27 23:18:17,160 - src.logg - INFO - DEBUG: Type of response is: <class 'google.generativeai.types.generation_types.GenerateContentResponse'>
2025-11-27 23:18:34,609 - src.logg - INFO - DEBUG: Type of response is: <class 'google.generativeai.types.generation_types.GenerateContentResponse'>
2025-11-27 23:19:24,242 - src.logg - INFO - DEBUG: Type of response is: <class 'google.generativeai.types.generation_types.GenerateContentResponse'>
2025-11-27 23:19:24,253 - src.logg - ERROR - Chat failure: Could not create `Blob`, expected `Blob`, `dict` or an `Image` type(`PIL.Image.Image` or `IPython.display.Image`).
Got a: <class 'google.generativeai.types.generation_types.GenerateContentResponse'>
Value: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "search_doctor_by_name",
                  "args": {
                    "name": "Arjun Patel"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 665,
        "candidates_token_count": 21,
        "total_token_count": 745
      },
      "model_version": "gemini-2.5-flash"
    }),
)
Traceback (most recent call last):
  File "C:\Users\fajal\OneDrive\Desktop\ClinicBook\gem.py", line 187, in gemini_chat
    final = gemini_model.generate_content([
        response, # The chat history so far
    ...<5 lines>...
        )
    ])
  File "C:\Users\fajal\OneDrive\Desktop\ClinicBook\clinic\Lib\site-packages\google\generativeai\generative_models.py", line 305, in generate_content
    request = self._prepare_request(
        contents=contents,
    ...<3 lines>...
        tool_config=tool_config,
    )
  File "C:\Users\fajal\OneDrive\Desktop\ClinicBook\clinic\Lib\site-packages\google\generativeai\generative_models.py", line 154, in _prepare_request
    contents = content_types.to_contents(contents)
  File "C:\Users\fajal\OneDrive\Desktop\ClinicBook\clinic\Lib\site-packages\google\generativeai\types\content_types.py", line 333, in to_contents
    contents = [to_content(contents)]
                ~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\fajal\OneDrive\Desktop\ClinicBook\clinic\Lib\site-packages\google\generativeai\types\content_types.py", line 296, in to_content
    return protos.Content(parts=[to_part(part) for part in content])
                                 ~~~~~~~^^^^^^
  File "C:\Users\fajal\OneDrive\Desktop\ClinicBook\clinic\Lib\site-packages\google\generativeai\types\content_types.py", line 264, in to_part
    return protos.Part(inline_data=to_blob(part))
                                   ~~~~~~~^^^^^^
  File "C:\Users\fajal\OneDrive\Desktop\ClinicBook\clinic\Lib\site-packages\google\generativeai\types\content_types.py", line 210, in to_blob
    raise TypeError(
    ...<4 lines>...
    )
TypeError: Could not create `Blob`, expected `Blob`, `dict` or an `Image` type(`PIL.Image.Image` or `IPython.display.Image`).
Got a: <class 'google.generativeai.types.generation_types.GenerateContentResponse'>
Value: response:
GenerateContentResponse(
    done=True,
    iterator=None,
    result=protos.GenerateContentResponse({
      "candidates": [
        {
          "content": {
            "parts": [
              {
                "function_call": {
                  "name": "search_doctor_by_name",
                  "args": {
                    "name": "Arjun Patel"
                  }
                }
              }
            ],
            "role": "model"
          },
          "finish_reason": "STOP",
          "index": 0
        }
      ],
      "usage_metadata": {
        "prompt_token_count": 665,
        "candidates_token_count": 21,
        "total_token_count": 745
      },
      "model_version": "gemini-2.5-flash"
    }),
)
2025-11-27 23:23:52,039 - src.logg - INFO - [Gemini] Model loaded with tools.
2025-11-27 23:23:52,048 - src.logg - INFO - 
App and DB connected.
2025-11-27 23:23:52,103 - src.logg - INFO - DB schema ready at ./data\clinicBook.db
2025-11-27 23:23:52,106 - src.logg - INFO - schema ensured in seeding.
2025-11-27 23:23:52,289 - src.logg - INFO - Seeding complete. DB at ./data\clinicBook.db
2025-11-27 23:24:08,149 - src.logg - INFO - [Gemini] Model loaded with tools.
2025-11-27 23:24:08,150 - src.logg - INFO - 
App and DB connected.
2025-11-27 23:24:08,167 - src.logg - INFO - DB schema ready at ./data\clinicBook.db
2025-11-27 23:24:08,169 - src.logg - INFO - schema ensured in seeding.
2025-11-27 23:24:08,177 - src.logg - INFO - Seeding complete. DB at ./data\clinicBook.db
2025-11-27 23:24:13,332 - src.logg - INFO - App running..................
2025-11-27 23:24:13,515 - src.logg - INFO - App running..................
2025-11-27 23:24:19,643 - src.logg - INFO - [Gemini] Model loaded with tools.
2025-11-27 23:24:19,646 - src.logg - INFO - 
App and DB connected.
2025-11-27 23:24:19,659 - src.logg - INFO - DB schema ready at ./data\clinicBook.db
2025-11-27 23:24:19,661 - src.logg - INFO - schema ensured in seeding.
2025-11-27 23:24:19,668 - src.logg - INFO - Seeding complete. DB at ./data\clinicBook.db
2025-11-27 23:24:22,122 - src.logg - INFO - [Gemini] Model loaded with tools.
2025-11-27 23:24:22,125 - src.logg - INFO - 
App and DB connected.
2025-11-27 23:24:22,141 - src.logg - INFO - DB schema ready at ./data\clinicBook.db
2025-11-27 23:24:22,143 - src.logg - INFO - schema ensured in seeding.
2025-11-27 23:24:22,284 - src.logg - INFO - Seeding complete. DB at ./data\clinicBook.db
2025-11-27 23:26:55,069 - src.logg - INFO - DEBUG: Type of response is: <class 'google.generativeai.types.generation_types.GenerateContentResponse'>
2025-11-27 23:27:09,404 - src.logg - INFO - DEBUG: Type of response is: <class 'google.generativeai.types.generation_types.GenerateContentResponse'>
2025-11-27 23:27:09,459 - src.logg - ERROR - Chat failure: Could not create `Blob`, expected `Blob`, `dict` or an `Image` type(`PIL.Image.Image` or `IPython.display.Image`).
Got a: <class 'google.ai.generativelanguage_v1beta.types.content.Content'>
Value: parts {
  function_call {
    name: "search_doctor_by_name"
    args {
      fields {
        key: "name"
        value {
          string_value: "Dr. M. Fajal"
        }
      }
    }
  }
}
role: "model"
Traceback (most recent call last):
  File "C:\Users\fajal\OneDrive\Desktop\ClinicBook\gem.py", line 189, in gemini_chat
    final = gemini_model.generate_content([
        user_msg,                        # 1. Include the User's original query
    ...<6 lines>...
        )
    ])
  File "C:\Users\fajal\OneDrive\Desktop\ClinicBook\clinic\Lib\site-packages\google\generativeai\generative_models.py", line 305, in generate_content
    request = self._prepare_request(
        contents=contents,
    ...<3 lines>...
        tool_config=tool_config,
    )
  File "C:\Users\fajal\OneDrive\Desktop\ClinicBook\clinic\Lib\site-packages\google\generativeai\generative_models.py", line 154, in _prepare_request
    contents = content_types.to_contents(contents)
  File "C:\Users\fajal\OneDrive\Desktop\ClinicBook\clinic\Lib\site-packages\google\generativeai\types\content_types.py", line 333, in to_contents
    contents = [to_content(contents)]
                ~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\fajal\OneDrive\Desktop\ClinicBook\clinic\Lib\site-packages\google\generativeai\types\content_types.py", line 296, in to_content
    return protos.Content(parts=[to_part(part) for part in content])
                                 ~~~~~~~^^^^^^
  File "C:\Users\fajal\OneDrive\Desktop\ClinicBook\clinic\Lib\site-packages\google\generativeai\types\content_types.py", line 264, in to_part
    return protos.Part(inline_data=to_blob(part))
                                   ~~~~~~~^^^^^^
  File "C:\Users\fajal\OneDrive\Desktop\ClinicBook\clinic\Lib\site-packages\google\generativeai\types\content_types.py", line 210, in to_blob
    raise TypeError(
    ...<4 lines>...
    )
TypeError: Could not create `Blob`, expected `Blob`, `dict` or an `Image` type(`PIL.Image.Image` or `IPython.display.Image`).
Got a: <class 'google.ai.generativelanguage_v1beta.types.content.Content'>
Value: parts {
  function_call {
    name: "search_doctor_by_name"
    args {
      fields {
        key: "name"
        value {
          string_value: "Dr. M. Fajal"
        }
      }
    }
  }
}
role: "model"

2025-11-27 23:28:42,792 - src.logg - INFO - DEBUG: Type of response is: <class 'google.generativeai.types.generation_types.GenerateContentResponse'>
2025-11-27 23:30:16,393 - src.logg - INFO - [Gemini] Model loaded with tools.
2025-11-27 23:30:16,396 - src.logg - INFO - 
App and DB connected.
2025-11-27 23:30:16,411 - src.logg - INFO - DB schema ready at ./data\clinicBook.db
2025-11-27 23:30:16,413 - src.logg - INFO - schema ensured in seeding.
2025-11-27 23:30:16,592 - src.logg - INFO - Seeding complete. DB at ./data\clinicBook.db
2025-11-27 23:30:35,143 - src.logg - INFO - App running..................
2025-11-27 23:30:35,311 - src.logg - INFO - App running..................
2025-11-27 23:30:40,401 - src.logg - INFO - [Gemini] Model loaded with tools.
2025-11-27 23:30:40,403 - src.logg - INFO - 
App and DB connected.
2025-11-27 23:30:40,420 - src.logg - INFO - DB schema ready at ./data\clinicBook.db
2025-11-27 23:30:40,422 - src.logg - INFO - schema ensured in seeding.
2025-11-27 23:30:40,601 - src.logg - INFO - Seeding complete. DB at ./data\clinicBook.db
2025-11-27 23:30:42,946 - src.logg - INFO - [Gemini] Model loaded with tools.
2025-11-27 23:30:42,948 - src.logg - INFO - 
App and DB connected.
2025-11-27 23:30:42,964 - src.logg - INFO - DB schema ready at ./data\clinicBook.db
2025-11-27 23:30:42,966 - src.logg - INFO - schema ensured in seeding.
2025-11-27 23:30:43,145 - src.logg - INFO - Seeding complete. DB at ./data\clinicBook.db
